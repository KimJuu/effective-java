## **변경 가능성 최소화**

**1. 불변 클래스**
- 그 인스턴스의 내부 값을 수정할 수 없는 클래스
- 클래스를 불변으로 만들기 위한 규칙
> 1. 객체의 상태를 변경하는 메서드(변경자)를 제공하지 않는다.
> 2. 클래스를 확장할 수 없도록 한다.
> 3. 모든 필드를 final로 선언한다.
> 4. 모든 필드를 private으로 선언한다.
> 5. 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다.
---
**2. 함수형 프로그래밍**
- 피연산자에 함수를 적용해 그 결과를 반환하지만, 피연산자 자체는 그대로인 프로그래밍 패턴
- 코드에서 불변이 되는 영역의 비율이 높아짐
---
**3. 불변 객체**
- 생성된 시점의 상태를 파괴될 때가지 그대로 간직
- 모든 생성자가 클래스 불변식(class invariant)을 보장한다면 영원히 불변으로 남음

**장점**
1) 근본적으로 스레드 안전하여 따로 동기화할 필요 X → 안심하고 공유 가능
2) 자유롭게 공유할 수 있으며(방어적 복사도 필요 없음), 불변 객체끼리는 내부 데이터 공유 가능
3) 객체를 만들 때 다른 불변 객체들을 구성요소로 사용하면 이점이 많음
4) 그 자체로 실패 원자성을 제공\
`실패 원자성 : 메서드에서 예외가 발생한 후에도 그 객체는 여전히 유효한 상태여야 한다는 성질`


**단점**
1) 값이 다르면 반드시 독립된 객체로 만들어야 함
---
**4. 변경 가능성 최소화**
- 꼭 필요한 경우가 아니라면 클래스는 불변이어야 함
- 불변으로 만들 수 없는 클래스라도 변경할 수 있는 부분을 최소화해야 함
- 다른 합당한 이유가 없다면 모든 필드는 private final이어야 함
- 생성자는 불변식 설정이 모두 완료된, 초기화가 완벽히 끝난 상태의 객체를 생성해야 함

`java.util.concurrent.CountDownLatch : 가변 클래스지만 가질 수 있는 상태의 수가 많지 않음`

### 상속보다는 컴포지션을 사용하라

- 상속은 코드를 재사용하는 강력한 수단이지만, 항상 최선은 아니다.

- 상속의 문제점
  - 상위 클래스의 구현이 하위 클래스에 노출되기 때문에 **캡슐화가 깨진다.**
  - 자식 클래스가 부모 클래스에 강하게 결합 및 의존하게 된다.
  - 상위 클래스가 어떻게 구현되느냐에 따라 하위 클래스의 동작에 이상이 생길 수 있다.
  - 상위 클래스의 내부 구현이 달라지면 하위 클래스가 오동작할 수 있다.
  - 부모 클래스의 결함도 자식 클래스에 넘어온다. -> ex) Stack, Properties

#### 컴포지션

- 새로운 클래스를 만들고 private 필드로 기존 클래스의 인스턴스를 참조한다.

- 컴포지션의 장점 => **상속의 단점 해결**

  - 새로운 클래스는 기존 클래스의 내부 구현 방식의 영향에서 벗어나며, 기존 클래스에 새로운 메서드가 추가되더라도 전혀 영향받지 않는다.
  - 메서드를 호출하는 방식으로 동작하기 때문에 캠슐화를 깨뜨리지 않는다.
  - 상위 클래스에 의존하지 않기 때문에 변화에 유연하다.

- 컴포지션 예제 코드

  ```java
  public class CompoClass {
    private final Aclass;
    private final Bclass;
    
    public CompoClass(Aclass aclass, Bclass bclass) {
      this.aclass = aclass;
      this.bclass = bclass;
    }
  }
  ```

#### 정리

- 상속은 강력하지만 캡슐화를 깨뜨린다.
- 상속은 상위 클래스와 하위 클래스가 is-a 관계에 있다.
- 컴포지션은 has-a 관계에 있다.
- 상위 클래스와 하위 클래스의 패키지가 다를 경우에는 is-a 관계라도 문제가 발생할 수 있다.
- 상속의 취약점을 피하려면 상속 대신 컴포지션과 전달을 사용하자.
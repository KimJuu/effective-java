**Item 06 불필요한 객체 생성을 피하라**

객체 하나를 재사용하는 편이 나은 경우

1) 불필요한 객체를 만들어내는 경우 

(예시1)String 인스턴스

안좋은 예시
```
String s = new String("me");
```

개선
```
String s = "me";
```

새로운 인스턴스를 만드는 대신 하나의 String 인스턴스를 사용 -> 같은 가상 머신 안에서 이와 똑같은 문자열 리터럴을 사용하는 모든 코드가 같은 객체를 재사용함이 보장됨

(예시2) 오토박싱

오토박싱이란? 기본 타입과 박싱된 기본 타입을 섞어 쓸 때 자동으로 상호 변환해주는 기술. 이 두 타입의 구분을 흐려주지만 완전히 없애주는 것은 아님

박싱된 기본 타입보다는 기본타입을 사용하고 의도치 않은 오토박싱이 숨어들지 않도록 주의! => 성능차이가 많이 남


2) 정적 팩터리 매서드의 불변 클래스 

Boolean(String) 보다 Boolean.valueOf(String) 을 사용하는것이 좋다.

생성자는 호출할 때마다 새로운 객체를 만들지만 팩터리 메서드는 그렇지 않음

3) 가변 객체라 해도 사용 중에 변경되지 않을 것임을 안다면 재사용할 수 있음

4) 생성 비용이 비싼 객체
이런 비싼 객체가 반복해서 필요하다면 캐싱하여 재사용하길 권함

(예시 :: String.matches)
이 메서드 내부에서 사용하는 Patterns 인스턴스는 한번 쓰고 버려짐
Pattern은 입력받은 정규표현식에 해당하는 유한 상태 머신을 만들기 때문에 인스턴스 생성 비용이 높다.

유한 상태 머신?
알고리즘 디자인을 위해 사용되는 수학적 도구로 일련의 입력을 받는다 -> 입력을 읽어서 다른 상태로 전환한다 -> 전환할 상태를 지정하는 간단한 일을 한다

String.matches 성능을 개선하려면?
Pattern 인스턴스를 클래스 초기화 과정에서 직접 생성해 캐싱해두고, 나중에 이 인스턴스를 재사용한다


주의해야 할 점!
단순히 객체 생성을 피하고자 객체 풀을 만들지 말자

객체 풀 생성이 필요한 경우? 데이터 베이스 연결 같은 생성 비용이 비싼 경우

방어적 복사를 하는것보단 객체를 재사용하는 편이 낫다